declare -a makescript
makescript_lenght=4
QEDIRPATH='/local/fs395'
QEDIRNAME='espresso'
QEVERSION='QE-SVN'

makescript[1]=$(cat <<EOF
make distclean
./configure --enable-openmp --disable-cuda --enable-parallel --without-scalapack
make MANUAL_DFLAGS="-D__TRACK_PW_ELECTRON_STEP" pw
cp bin/pw.x ${FINALDIR}/pw-mpi-omp.x
EOF
)

makescript[2]=$(cat <<EOF
make distclean
./configure --enable-openmp --disable-cuda --enable-parallel --with-scalapack
make MANUAL_DFLAGS="-D__TRACK_PW_ELECTRON_STEP" pw
cp bin/pw.x ${FINALDIR}/pw-mpi-omp-scalapack.x
EOF
)

makescript[3]=$(cat <<EOF
make distclean
cd GPU
./configure --enable-openmp --enable-cuda --with-gpu-arch=20 --with-cuda-dir=${CUDA_HOME} --enable-parallel --with-magma --with-phigemm=profile --without-scalapack
cd -
make -f Makefile.gpu MANUAL_DFLAGS="-D__TRACK_PW_ELECTRON_STEP" pw-gpu
cp bin/pw-gpu.x ${FINALDIR}/pw-mpi-omp-gpu-magma-profiling.x
EOF
)

makescript[4]=$(cat <<EOF
make distclean
cd GPU
./configure --enable-openmp --enable-cuda --with-gpu-arch=20 --with-cuda-dir=${CUDA_HOME} --enable-parallel --without-magma --with-phigemm=profile --with-scalapack
cd -
make -f Makefile.gpu MANUAL_DFLAGS="-D__TRACK_PW_ELECTRON_STEP" pw-gpu
cp bin/pw-gpu.x ${FINALDIR}/pw-mpi-omp-gpu-scalapack-profiling.x
EOF
)

makescript[5]=$(cat <<EOF
make distclean
cd GPU
 ./configure --enable-openmp --enable-parallel --enable-cuda --with-gpu-arch=20 --with-cuda-dir=${CUDA_HOME} --with-phigemm=profile --without-magma --with-scalapack
cd -
make -f Makefile.gpu MANUAL_DFLAGS="-D__TRACK_PW_ELECTRON_STEP -D__DISABLE_CUDA_NEWD -D__DISABLE_CUDA_ADDUSDENS -D__DISABLE_CUDA_VLOCPSI -D__PHIGEMM_HACK_CPUONLY" pw-gpu
cp bin/pw-gpu.x ${FINALDIR}/pw-mpi-omp-profiling-scalapack.x
EOF
)

makescript[6]=$(cat <<EOF
make distclean
cd GPU
./configure --enable-openmp --enable-parallel --enable-cuda --with-gpu-arch=20 --with-cuda-dir=${CUDA_HOME} --with-phigemm=profile --without-magma --without-scalapack
cd -
make -f Makefile.gpu MANUAL_DFLAGS="-D__DISABLE_CUDA_NEWD -D__DISABLE_CUDA_ADDUSDENS -D__DISABLE_CUDA_VLOCPSI -D__PHIGEMM_HACK_CPUONLY -D__TRACK_PW_ELECTRON_STEP" pw-gpu
cp bin/pw-gpu.x ${FINALDIR}/pw-mpi-omp-profiling.x
EOF
)

makescript[7]=$(cat <<EOF
make distclean
cd GPU
./configure --enable-openmp --enable-cuda --with-gpu-arch=20 --with-cuda-dir=${CUDA_HOME} --enable-parallel --with-magma --with-phigemm  --without-scalapack
cd -
make -f Makefile.gpu MANUAL_DFLAGS="-D__TRACK_PW_ELECTRON_STEP" pw-gpu
cp bin/pw-gpu.x ${FINALDIR}/pw-mpi-omp-gpu-magma.x
EOF
)

makescript[8]=$(cat <<EOF
make distclean
cd GPU
./configure --enable-openmp --enable-cuda --with-gpu-arch=20 --with-cuda-dir=${CUDA_HOME} --enable-parallel --without-magma --with-phigemm  --with-scalapack
cd -
make -f Makefile.gpu MANUAL_DFLAGS="-D__TRACK_PW_ELECTRON_STEP" pw-gpu
cp bin/pw-gpu.x ${FINALDIR}/pw-mpi-omp-gpu-scalapack.x
EOF
)

makescript[9]=$(cat <<EOF
make distclean
cd GPU
./configure --disable-openmp --enable-parallel --enable-cuda --with-gpu-arch=20 --with-cuda-dir=${CUDA_HOME} --with-phigemm=profile --without-magma --with-scalapack
cd -
make -f Makefile.gpu MANUAL_DFLAGS="-D__TRACK_PW_ELECTRON_STEP -D__DISABLE_CUDA_NEWD -D__DISABLE_CUDA_ADDUSDENS -D__DISABLE_CUDA_VLOCPSI -D__PHIGEMM_HACK_CPUONLY" pw-gpu
cp bin/pw-gpu.x ${FINALDIR}/pw-mpi-profiling-scalapack.x
EOF
)

makescript[10]=$(cat <<EOF
make distclean
cd GPU
./configure --disable-openmp --enable-parallel --enable-cuda --with-gpu-arch=20 --with-cuda-dir=${CUDA_HOME} --with-phigemm=profile --without-magma --without-scalapack
cd -
make -f Makefile.gpu MANUAL_DFLAGS="-D__DISABLE_CUDA_NEWD -D__DISABLE_CUDA_ADDUSDENS -D__DISABLE_CUDA_VLOCPSI -D__PHIGEMM_HACK_CPUONLY -D__TRACK_PW_ELECTRON_STEP" pw-gpu
cp bin/pw-gpu.x ${FINALDIR}/pw-mpi-profiling.x
EOF
)

makescript[11]=$(cat <<EOF
make distclean
./configure --disable-openmp --disable-cuda --enable-parallel --without-scalapack
make MANUAL_DFLAGS="-D__TRACK_PW_ELECTRON_STEP" pw
cp bin/pw.x ${FINALDIR}/pw-mpi.x
EOF
)

makescript[12]=$(cat <<EOF
make distclean
./configure --disable-openmp --disable-cuda --enable-parallel --with-scalapack
make MANUAL_DFLAGS="-D__TRACK_PW_ELECTRON_STEP" pw
cp bin/pw.x ${FINALDIR}/pw-mpi-scalapack.x
EOF
)
